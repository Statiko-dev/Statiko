# Authorization token
# Can also be passed with environmental variable PLATFORM_AUTH
auth: ""

# Port the server is listening on (must be a string)
# Defaults to 2265 if not set
# Can also be passed with environmental variable PORT
port: "2265"

# File containing the state persistently stored on disk
# Can also be passed with environmental variable STATE_PATH
store: "/etc/smplatform/state.json"

# Configuration for the nginx webserver
nginx:
  # Path where the nginx config is stored
  configPath: "/etc/nginx/"
  # Shell commands to start/stop/restart(reload) nginx
  commands:
    # Can also be passed with environmental variable PLATFORM_NGINX_START
    start: "service nginx start"
    # Can also be passed with environmental variable PLATFORM_NGINX_STOP
    stop: "service nginx stop"
    # Can also be passed with environmental variable PLATFORM_NGINX_RESTART
    restart: "[[ $(service nginx status) ]] && service nginx reload || service nginx restart"

# Path
# Use a folder inside /mnt (e.g. /mnt/data/) for Azure VMs to leverage the locally-attached SSD
# Can also be passed with environmental variable PLATFORM_APP_ROOT
appRoot: "/data/"

# Azure Key Vault
azureKeyVault:
  # Name of the Key Vault
  # Can also be passed with environmental variable AZURE_KEYVAULT_NAME
  name: ""

  # Service Principal to access the Key Vault
  servicePrincipal:
    # Can also be passed with environmental variable AZURE_TENANT_ID
    tenantId: ""
    # Can also be passed with environmental variable AZURE_CLIENT_ID
    clientId: ""
    # Can also be passed with environmental variable AZURE_CLIENT_SECRET
    clientSecret: ""

# Azure Storage
azureStorage:
  # Storage account name
  # Can also be passed with environmental variable AZURE_STORAGE_ACCOUNT
  account: ""
  # Storage account key
  # Can also be passed with environmental variable AZURE_STORAGE_KEY
  key: ""
  # Container name
  # Can also be passed with environmental variable AZURE_STORAGE_CONTAINER
  container: ""

# Code signing public key
codesignKey: "/etc/smplatform/codesign.pub"

# TLS
tls:
  # Diffie-Hellman parameters used by all TLS-enabled sites
  dhparams: "/etc/smplatform/dhparams.pem"
  node:
    # Using TLS is strongly recommended
    enabled: yes
    certificate: "/etc/smplatform/node-public.crt"
    key: "/etc/smplatform/node-private.key"

# Node name (optional; will default to the hostname)
# Can also be passed with environmental variable NODE_NAME
nodeName: ""
